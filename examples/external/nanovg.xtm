;;; nanovg.xtm:examples -- nanovg antialiased 2D graphics library example

;; Author: Ben Swift
;; Keywords: extempore
;; Required dylibs: libGL, libglfw3, libnanovg

;;; Commentary:

;; nanovg GH page: https://github.com/memononen/nanovg

;;; Code:

(sys:load "libs/external/glfw3.xtm")
(sys:load "libs/external/nanovg.xtm")

(bind-val width float 1024.)
(bind-val height float 768.)
(bind-val pixel_ratio float)

(bind-val window GLFWwindow*)
(bind-val vg NVGcontext*)

(call-as-xtlang
 (glfwSetErrorCallback (convert (get_native_fptr glfw_error_callback)))
 (set! window (glfw_init_and_create_window (convert width) (convert height)))
 (set! vg (nvg_create_context))
 (set! pixel_ratio (nvg_get_pixel_ratio window)))

